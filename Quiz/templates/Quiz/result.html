{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Clash | Result
    </title>
    <!-- GOOGLE FONT -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <!-- BOXICONS -->
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- APP CSS -->
    <link rel="stylesheet"  href="{% static 'result/css/grid.css' %}" >
    <link rel="stylesheet"  href="{% static 'result/css/app.css' %}" >
    <!-- <link rel="stylesheet" href="./css/bootstrap.min.css"> -->
</head>

<body>
    <section class="navigation">
		<div class="nav-container">
		  <div class="brand">
			  <!--logo of both clash and pisb will be added later in the navbar-->
			<a href="{% url 'login' %}">Clash</a>
			<a href="#">PISB</a>
		  </div>
		  <nav>
			<div class="nav-mobile"><a id="navbar-toggle" href="#"><span></span></a></div>
			<ul class="nav-list">
			  <!-- <li>
				<a href="#">Instructions</a>
			  </li>
			  <li>
				<a href="#">Leaderboard</a>
			  </li> -->
			  <li>
				<a href="#!">Logout</a>
			  </li>
			</ul>
		  </nav>
		</div>
	</section>
    <!-- MAIN CONTENT -->
    <div class="main">
        <div class="main-content">
            <div class="row">
                <div class="col-3 col-md-6 col-sm-12">
                    <div class="box box-hover">
                        <!-- COUNTER -->
                        <div class="counter">
                            <div class="counter-title">
                                Username
                            </div>
                            <div class="counter-info">
                                <div class="counter-count">
                                    {{user.username}}
                                </div>
                                <i class='fa fa-user'></i>
                            </div>
                        </div>
                        <!-- END COUNTER -->
                    </div>
                </div>
                <div class="col-3 col-md-6 col-sm-12">
                    <div class="box box-hover">
                        <!-- COUNTER -->
                        <div class="counter">
                            <div class="counter-title">
                                Score
                            </div>
                            <div class="counter-info">
                                <div class="counter-count">
                                    {{profile.final_score}}
                                </div>
                                <i class='fa fa-line-chart'></i>
                            </div>
                        </div>
                        <!-- END COUNTER -->
                    </div>
                </div>
                <div class="col-3 col-md-6 col-sm-12">
                    <div class="box box-hover">
                        <!-- COUNTER -->
                        <div class="counter">
                            <div class="counter-title">
                                Questions attempted
                            </div>
                            <div class="counter-info">
                                <div class="counter-count">
                                    {{profile.number_of_submits}}
                                </div>
                                <i class='fa fa-question' style="font-size:35px"></i>
                            </div>
                        </div>
                        <!-- END COUNTER -->
                    </div>
                </div>
                <div class="col-3 col-md-6 col-sm-12">
                    <div class="box box-hover">
                        <!-- COUNTER -->
                        <div class="counter">
                            <div class="counter-title">
                                Correct answered
                            </div>
                            <div class="counter-info">
                                <div class="counter-count">
                                    {{profile.correct_ques}}
                                </div>
                                <i class='fa fa-check'></i>
                            </div>
                        </div>
                        <!-- END COUNTER -->
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-5 col-md-6 col-sm-12">
                    <!-- TOP PRODUCT -->
                    <div class="clash-info">
                        <div class="box f-height">
                            <div class="box-header">
                                Clash
                            </div><br>
                            Lorem ipsum dolor sit amet consectetur, adipisicing elit. Vitae qui consequuntur aperiam architecto fuga, cumque sunt earum autem placeat nemo voluptatum reiciendis, numquam quas iste natus dolor voluptatibus aut perferendis.<br><br> Lorem ipsum, dolor sit amet consectetur adipisicing elit. Nostrum quas voluptatibus temporibus reiciendis, doloremque earum nisi odit voluptas impedit officia enim? Pariatur itaque quia ad sit soluta amet at ducimus!
                        </div>
                    </div>
                    
                    <!-- TOP PRODUCT -->
                </div>
                <div class="col-4 col-md-6 col-sm-12">
                    <!-- CATEGORY CHART -->
                    <div class="pie-chart">
                        <div class="box-piechart f-height">
                            <div class="box-body">
                                <div id="category-chart"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- END CATEGORY CHART -->
                </div>
                <div class="col-5 col-md-12 col-sm-12">
                    <!-- CUSTOMERS CHART -->
                    <div class="sponsors-info">
                        <div class="box f-height">
                            <div class="box-header">
                                Sponsors
                            </div>
                            <div class="container">
                                <div class="row">
                                    <div class="gallery-item shoe">
                                        <div class="gallery-item-inner">
                                            <img src="{% static 'login/img/cn1.jpg' %}" alt="sponsor1">
                                        </div>
                                    </div>
                                    <div class="gallery-item headphone">
                                        <div class="gallery-item-inner">
                                            <img src="{% static 'login/img/cn1.jpg' %}"  alt="sponsor2">
                                        </div>
                                    </div>
                                    <div class="gallery-item camera">
                                        <div class="gallery-item-inner">
                                            <img src="{% static 'login/img/cp2.jpg' %}" alt="sponsor3">
                                        </div>
                                    </div>
                                    <div class="gallery-item camera">
                                        <div class="gallery-item-inner">
                                            <img src="{% static 'login/img/cp2.jpg' %}" alt="sponsor3">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- END CUSTOMERS CHART -->
                </div>
            </div>
        </div>
    </div>
    <!-- END MAIN CONTENT -->

    <div class="overlay"></div>

    <div class="footer">
        <!-- <div class="leftieee">&copy; PICT IEEE Student Branch</div> -->
        <div class="middleieee">&copy; PICT IEEE Student Branch</div>
      </div>
      <!-- end of footer -->

    <!-- SCRIPT -->
    <!-- APEX CHART -->

    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>


    <script>
        document.querySelectorAll('.sidebar-submenu').forEach(e => {
    e.querySelector('.sidebar-menu-dropdown').onclick = (event) => {
        event.preventDefault()
        e.querySelector('.sidebar-menu-dropdown .dropdown-icon').classList.toggle('active')

        let dropdown_content = e.querySelector('.sidebar-menu-dropdown-content')
        let dropdown_content_lis = dropdown_content.querySelectorAll('li')

        let active_height = dropdown_content_lis[0].clientHeight * dropdown_content_lis.length

        dropdown_content.classList.toggle('active')

        dropdown_content.style.height = dropdown_content.classList.contains('active') ? active_height + 'px' : '0'
    }
})

let corr_ques = parseInt("{{profile.correct_ques}}");
let wrong_ques = parseInt("{{profile.number_of_submits}}") - corr_ques;

console.log(corr_ques,"hdsgfshghd")
console.log(wrong_ques,"wrong")

let category_options = {
    series: [corr_ques, wrong_ques],
    labels: ['Correct answers', 'Wrong answers'],
    chart: {
        type: 'donut',
    },
    colors: ['#6ab04c', '#d35400']
}

let category_chart = new ApexCharts(document.querySelector("#category-chart"), category_options)
category_chart.render()

let customer_options = {
    series: [{
        name: "Store Customers",
        data: [40, 70, 20, 90, 36, 80, 30, 91, 60]
    },{
        name: "Online Customers",
        data: [20, 30, 10, 20, 16, 40, 20, 51, 10]
    }],
    colors: ['#6ab04c', '#2980b9'],
    chart: {
        height: 350,
        type: 'line',
    },
    dataLabels: {
        enabled: false
    },
    stroke: {
        curve: 'smooth'
    },
    xaxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep'],
    },
    legend: {
        position: 'top'
    }
}

let customer_chart = new ApexCharts(document.querySelector("#customer-chart"), customer_options)
customer_chart.render()

setDarkChart = (dark) => {
    let theme = {
        theme: {
            mode: 'dark'
        }
    }

    customer_chart.updateOptions(theme)
    category_chart.updateOptions(theme)
} 

// DARK MODE TOGGLE
let darkmode_toggle = document.querySelector('#darkmode-toggle')

darkmode_toggle.onclick = (e) => {
    e.preventDefault()
    document.querySelector('body').classList.toggle('dark')
    darkmode_toggle.querySelector('.darkmode-switch').classList.toggle('active')
    setDarkChart(document.querySelector('body').classList.contains('dark'))
}

let overlay = document.querySelector('.overlay')
let sidebar = document.querySelector('.sidebar')

document.querySelector('#mobile-toggle').onclick = () => {
    sidebar.classList.toggle('active')
    overlay.classList.toggle('active')
}

document.querySelector('#sidebar-close').onclick = () => {
    sidebar.classList.toggle('active')
    overlay.classList.toggle('active')
}
    </script>


</body>

<!-- APP JS -->
<!-- <script  src="{% static 'login/css/result.js' %}"></script> -->
<!-- <script src="./js/jquery.min.js"></script>
<script src="./js/bootstrap.min.js"></script>
<script src="./js/scripts.js"></script>
<script src="./js/navbar.js"></script> -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>



</html>